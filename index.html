<script>
    function generateLink() {
        const headline = document.getElementById('headline').value;
        const imageUrl = document.getElementById('imageUrl').value;
        const linkInput = document.getElementById('generatedLink');

        if (!headline || !imageUrl) {
            alert('Please enter a headline and paste an image URL.');
            return;
        }

        const sanitizedHeadline = headline.replace(/\s+/g, '-').toLowerCase();
        const shortId = Math.random().toString(36).substr(2, 5);
        const articlePath = `article/${sanitizedHeadline}-${shortId}`;

        // Generate link with parameters for iMessage preview
        const maskedLink = `https://worlddailyreport.com/${articlePath}?image=${encodeURIComponent(imageUrl)}&headline=${encodeURIComponent(headline)}`;
        linkInput.value = maskedLink;
    }

    function copyLink() {
        const linkInput = document.getElementById('generatedLink');
        linkInput.select();
        document.execCommand('copy');
        alert('Link copied to clipboard!');
    }
</script>
