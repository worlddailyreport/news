<script>
    function generateLink() {
        const title = document.getElementById('fake_title').value;
        const imageUrl = document.getElementById('fake_image_url').value;
        const linkInput = document.getElementById('generatedLink');

        if (!title || !imageUrl) {
            alert('Please enter a title and an image URL.');
            return;
        }

        const sanitizedTitle = title.replace(/\s+/g, '-').toLowerCase();
        const shortId = Math.random().toString(36).substr(2, 5);
        const articlePath = `article/${sanitizedTitle}-${shortId}`;

        // Generate link with parameters for iMessage preview
        const maskedLink = `https://worlddailyreport.com/${articlePath}?image=${encodeURIComponent(imageUrl)}&headline=${encodeURIComponent(title)}`;
        linkInput.value = maskedLink;
    }

    function copyLink() {
        const linkInput = document.getElementById('generatedLink');
        linkInput.select();
        document.execCommand('copy');
        alert('Link copied to clipboard!');
    }
</script>
